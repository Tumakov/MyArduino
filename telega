#include <t1.h>

T1 telega = T1();

// Константы
#define START_TIME  1000  // Время до первого старта
#define FS  200           // Полный ход
#define RANGE  700        // Датчик линии
#define DIST  20          // Сонар

boolean stopandstart;

void setup(){
  
  while(!telega.buttonPressed());  // Кнопка
  
  while(telega.readSonar() < DIST)
  telega.drive( 0 , 0 );

  delay(START_TIME);

  startfuction();
}

void loop(){
  
  stopandstart = false;
  
  while(telega.readSonar() < DIST){          //для шлагбаума!
    telega.drive( 0 , 0 );
    stopandstart = true;
  }

  if(stopandstart)
    startfuction();

///////////////////////////////////////////////////////////////////////////////

  while(telega.readSonar() < DIST){          //для банки!        (увеличить углы)
    telega.drive(FS , FS - 100);
    delay(1000);
    telega.drive(FS - 100 , FS);
    delay(1000);
  }

  
  
  while(telega.readSensorL() < RANGE)
  telega.drive(FS - 70 , FS - 20);         //КОЛЛЕР

  while(telega.readSensorR() < RANGE)
  telega.drive(FS - 20 , FS - 70);         //КОЛЛЕР

  delay(50); 

  telega.drive( FS , FS );
  
  }

void startfuction(){
  int i = 0;
  while(i < FS){
  i = i + 20;
  telega.drive( i , i );
  delay(20);}                               //КОЛЛЕР
  telega.drive( FS , FS );
  }
